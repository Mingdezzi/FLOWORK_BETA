/* --- index.html & Global Layout --- */

/* (1) 스크롤바 흔들림 방지: 스크롤바 트랙을 항상 표시 */
html { 
    overflow-y: scroll; 
}

/* (2) 모든 페이지 너비를 1800px로 강제 통일 */
/* Bootstrap의 반응형 너비(media query)를 무시하고 꽉 차게 설정 */
.container { 
    width: 100% !important; /* 반응형 고정 너비 무시하고 꽉 채움 */
    max-width: 1800px !important; /* 최대 너비 제한 */
    padding-right: var(--bs-gutter-x, .75rem);
    padding-left: var(--bs-gutter-x, .75rem);
    margin-right: auto;
    margin-left: auto;
}

.navbar-brand { font-weight: bold; }
.product-item .item-image { width: 60px; height: 60px; object-fit: contain; background-color: #fff; }
.product-meta .discount { font-weight: bold; }
.card-header h2 { font-size: 1.15rem; font-weight: 500;}
.list-group-item { border-left: 0; border-right: 0;}
.list-group-item:first-child { border-top-left-radius: 0; border-top-right-radius: 0;}
.list-group-item:last-child { border-bottom-left-radius: 0; border-bottom-right-radius: 0;}

#search-submit-btn { display: none; }
#search-query-input[readonly]:focus {
     border-color: #f6b5b3; box-shadow: 0 0 0 0.25rem rgba(235, 104, 100, 0.25);
}

.nav-tabs .nav-link.active, .nav-tabs .nav-item.show .nav-link {
    color: #eb6864; background-color: transparent; border-color: #dee2e6 #dee2e6 #fff; border-bottom: 2px solid #eb6864;
}
.nav-tabs { border-bottom: 1px solid #dee2e6; }
.nav-link { color: #6c757d; }

/* 카테고리 버튼바 스타일 (Grid 적용) */
#category-bar {
    display: grid !important;
    gap: 5px;
    margin-bottom: 15px;
}

#category-bar .btn {
    flex-grow: 0; 
    flex-basis: auto;
    width: 100%;
    padding: 0.5rem 0.25rem;
    font-size: 0.9rem;
}

#category-bar .btn.active {
     background-color: #eb6864;
     border-color: #eb6864;
     color: white;
}
#category-bar .btn:not(.active) {
    background-color: #f8f9fa;
    border-color: #dee2e6;
    color: #6c757d;
}

.keypad-hidden {
    display: none !important;
}

.keypad-grid { 
    display: grid; 
    grid-template-columns: repeat(3, 1fr);
    gap: 5px;
}
.keypad-btn {
    height: 60px;
    font-size: 1.2rem;
    font-weight: 500;
    border: 1px solid #dee2e6;
}
.keypad-grid .keypad-btn[data-key="backspace"] {
    grid-column: 1 / 2;
    font-size: 1.1rem;
}
.keypad-grid .keypad-btn[data-key="0"] {
    grid-column: 2 / 3;
}
.keypad-grid .keypad-btn[data-key="mode-kor"] {
    grid-column: 3 / 4;
    font-size: 1.1rem;
}

.keypad-qwerty {
    display: flex;
    flex-direction: column;
    gap: 5px;
}
.qwerty-row {
    display: flex;
    gap: 4px;
    width: 100%;
    justify-content: center;
}
.qwerty-key {
    flex-grow: 0;
    flex-basis: 9.5%;
    
    height: 60px;
    padding: 0;
    font-size: 1.1rem;
    font-weight: 500;
    border: 1px solid #dee2e6;
    background-color: #fff;
    color: #212529;
    border-radius: 0.25rem;
}
.qwerty-key:active {
    background-color: #ced4da;
}

.qwerty-key.key-special {
    background-color: #f8f9fa;
    font-size: 0.9rem;
    font-weight: bold;
    color: #495057;
}

.qwerty-key.key-special.active {
    background-color: #eb6864;
    border-color: #eb6864;
    color: white;
}

#keypad-kor .qwerty-row-2, #keypad-eng .qwerty-row-2 {
     padding-left: 0;
     padding-right: 0;
}

.qwerty-row-bottom {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 5px;
}
.qwerty-row-bottom .keypad-btn {
    height: 60px;
    font-size: 1.1rem;
    font-weight: 500;
}


/* --- list.html --- */
.advanced-search-form .form-label { 
    font-size: 0.85rem; 
    margin-bottom: 0.2rem; 
    display: block; 
    font-weight: 500;
}
.advanced-search-form .form-select-sm {
    font-size: 0.875rem;
}


/* --- detail.html --- */
.nav-item.disabled > .nav-link { color: #adb5bd !important; background-color: transparent !important; }

.product-details {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}

.product-details h2 { font-size: 1.5rem; border-bottom: none; padding-bottom: 0; }
.product-meta span + span::before { content: "|"; margin: 0 0.5rem; color: #adb5bd; }
.product-pricing .original-price { font-size: 0.9em; }
.product-pricing .sale-price { font-size: 1.1em; }
.product-pricing .discount { font-size: 1.1em; }

.action-buttons {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
    align-items: flex-start;
    gap: 0.5rem;
    margin-top: 1rem; 
}

.action-buttons > .btn {
    flex: 0 0 160px; 
    width: 160px;
    box-sizing: border-box;
}

 .action-buttons .edit-mode-controls-wrapper {
     display: flex; 
     flex-wrap: wrap;
     gap: 0.5rem;
     flex: 0 0 160px;
     width: 160px;
}

.action-buttons .edit-mode-controls-wrapper > .btn {
    flex: 1 1 auto;
    width: auto;
    min-width: 65px;
}

.action-buttons .edit-mode-controls-wrapper .btn-edit-product {
     flex: 1 1 100%;
     width: 160px;
}


.btn-toggle-actual-stock.active { background-color: #28a745; border-color: #28a745; }

.product-image img { max-height: 400px; object-fit: contain; }
.product-image .error-text { display: none; color: #6c757d; padding: 40px 0; background-color: #f8f9fa; border-radius: 0.375rem; }

.stock-table th, .stock-table td {
    padding: 0.75rem 0.5rem;
    vertical-align: middle;
    font-size: 1.5rem; 
    white-space: nowrap;
    text-align: center;
}

.stock-table th:nth-child(1), .stock-table td:nth-child(1),
.stock-table th:nth-child(2), .stock-table td:nth-child(2) {
    text-align: center !important;
}

.actual-stock-input {
    padding: 0.375rem 0.2rem;
    font-size: 1.5rem; 
    text-align: center;
    line-height: 1.5;
    vertical-align: middle;
    min-width: 50px; 
}
.btn-save-actual {
    padding: 0.375rem 0.4rem;
    font-size: 0.875rem;
    line-height: 1.5;
    vertical-align: middle;
    display: inline-block;
    margin-left: 0.25rem;
}
.stock-diff {
    min-width: 25px;
    display: inline-block;
    text-align: center;
    vertical-align: middle;
    font-size: 1.5rem; 
    line-height: 1.1;
}
.stock-diff.badge.bg-primary::before { content: "+"; }

.related-container .card-header h2 { font-size: 1.15rem; font-weight: 500;}

.actual-stock-control {
    width: auto;
    margin-left: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-wrap: nowrap; 
}

.edit-mode-controls { display: none; }
.edit-field { display: none; }
.view-field { display: table-cell; }
body.edit-mode .edit-field { display: table-cell; }
body.edit-mode .view-field { display: none; }
body.edit-mode .stock-control .btn-group-vertical { display: none; }
body.edit-mode .btn-edit-product { display: none; }
body.edit-mode .btn-toggle-actual-stock { display: none; }
body.edit-mode .action-buttons .btn-favorite { display: none; }
body.edit-mode .edit-mode-controls-wrapper .edit-mode-controls { display: inline-block; }

body.edit-mode .variant-edit-cell { padding: 0.25rem !important; }
.variant-edit-input { width: 100%; max-width: 80px; font-size: 0.85rem; padding: 0.2rem 0.4rem; }
.btn-delete-variant { padding: 0.1rem 0.4rem; font-size: 0.8rem; }
#add-variant-row { display: none; }
body.edit-mode #add-variant-row { display: table-row; }
#add-variant-row input { max-width: 100px; }

.stock-table thead th {
    border-right: 1px solid #dee2e6;
}
.stock-table thead th:last-child {
     border-right: none;
}
.table-responsive {
    border: 1px solid #dee2e6;
    border-bottom: none;
}
.stock-table tbody tr:last-child td {
    border-bottom: 1px solid #dee2e6;
}

.stock-table {
    margin-bottom: 0;
    table-layout: fixed;
    width: 100%;
}

.stock-table th:nth-child(1), .stock-table td:nth-child(1),
.stock-table th:nth-child(2), .stock-table td:nth-child(2),
.stock-table th:nth-child(3), .stock-table td:nth-child(3),
.stock-table th:nth-child(4), .stock-table td:nth-child(4) {
     width: 25%;
}

.stock-table th:nth-child(5), 
.stock-table td:nth-child(5) {
    width: 120px;
}
.stock-table th:nth-child(6), 
.stock-table td:nth-child(6) {
     width: 80px;
}
.stock-table th:nth-child(7), 
.stock-table td:nth-child(7) {
     width: 200px;
}


.stock-quantity, .stock-hq {
    font-size: 2rem; 
    font-weight: bold;
}


@media (max-width: 768px) { 
    .stock-table {
        table-layout: fixed !important;
    }

    .stock-table th, .stock-table td {
        padding: 0.5rem 0.25rem;
        font-size: 1rem;
        white-space: normal; 
    }
    .actual-stock-input {
        padding: 0.25rem 0.15rem;
        font-size: 1rem;
    }
     .stock-diff {
        font-size: 1rem;
    }
    .stock-quantity, .stock-hq {
        font-size: 1.5rem;
    }
    
    .stock-table th:nth-child(1), .stock-table td:nth-child(1),
    .stock-table th:nth-child(2), .stock-table td:nth-child(2),
    .stock-table th:nth-child(3), .stock-table td:nth-child(3),
    .stock-table th:nth-child(4), .stock-table td:nth-child(4) {
         width: 25% !important; 
    }
    .stock-table th:nth-child(5), .stock-table td:nth-child(5) {
         width: 80px !important;
    }
    .stock-table th:nth-child(6), .stock-table td:nth-child(6) {
         width: 50px !important;
    }
    .stock-table th:nth-child(7), .stock-table td:nth-child(7) {
         width: 130px !important;
    }
}

/* --- stock.html --- */
.card-header h3 { font-size: 1.15rem; font-weight: 500;}
.management-form button { flex-shrink: 0; }
.reset-button { background-color: #ffc107; color: #333; border: none;}
.reset-button:hover { background-color: #e0a800; color:#333; }

#scan-table th, #scan-table td {
    font-size: 0.85rem; padding: 0.5rem 0.25rem; vertical-align: middle; text-align: center;
}
#scan-table td:nth-child(1), #scan-table th:nth-child(1) { text-align: left; padding-left: 0.5rem; font-size: 0.8rem; max-width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
#scan-table td:nth-child(2), #scan-table th:nth-child(2) { max-width: 70px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.scan-quantity-input { width: 45px; text-align: center; padding: 0.25rem 0.1rem; height: auto; }
.scan-diff { font-weight: bold; }
.scan-diff.positive { color: #007bff; }
.scan-diff.negative { color: #eb6864; }
#scan-status-alert { display: none; }
.section-title { font-size: 1.3rem; font-weight: 500; color: #212529; border-bottom: 2px solid #dee2e6; padding-bottom: 0.5rem; margin-bottom: 1.5rem; }

#toggle-scan-btn { width: 120px; }

.btn-db-reset-all { background-color: #dc3545; border-color: #dc3545; color: white; }
.btn-db-reset-all:hover { background-color: #c82333; border-color: #bd2130; color: white; }

.column-mapping-grid { 
    display: grid; 
    grid-template-columns: 1fr 1fr;
    gap: 0.75rem; 
    align-items: start;
}
.mapping-item {
    display: flex;
    flex-direction: column;
}
.mapping-item label { 
    font-size: 0.85rem; 
    margin-bottom: 0.2rem; 
    display: block; 
    font-weight: 500;
}
.mapping-item select { 
    font-size: 0.9rem; 
    padding: 0.25rem 0.5rem; 
    height: auto;
}
.update-stock-form button { 
    margin-top: 1rem; 
}

.col-preview {
    font-size: 0.75rem;
    color: #6c757d;
    background-color: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 0.25rem;
    padding: 0.3rem 0.5rem;
    margin-top: 0.25rem;
    min-height: 80px;
}
.col-preview ul {
    margin: 0;
    padding-left: 1.1rem;
}
.col-preview li {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
}
.col-preview li:first-child {
    font-weight: bold;
    color: #343a40;
}

.column-mapping-grid .mapping-item-wrapper:nth-child(1) { grid-column: 1 / 2; grid-row: 1 / 2; }
.column-mapping-grid .mapping-item-wrapper:nth-child(2) { grid-column: 2 / 3; grid-row: 1 / 2; }
.column-mapping-grid .mapping-item-wrapper:nth-child(3) { grid-column: 1 / 2; grid-row: 2 / 3; }
.column-mapping-grid .mapping-item-wrapper:nth-child(4) { grid-column: 2 / 3; grid-row: 2 / 3; }
.column-mapping-grid .mapping-item-wrapper:nth-child(5) { grid-column: 1 / 2; grid-row: 3 / 4; }

.file-upload-wrapper {
     border: 2px dashed #dee2e6;
     border-radius: 0.375rem;
     padding: 1rem;
     text-align: center;
     background-color: #f8f9fa;
     transition: background-color 0.2s, border-color 0.2s;
}
.file-upload-wrapper.loading {
     background-color: #e9ecef;
     border-color: #adb5bd;
}
.file-upload-wrapper.success {
     background-color: #e6f9f0;
     border-color: #28a745;
}
.file-upload-wrapper.error {
     background-color: #fdf0f1;
     border-color: #dc3545;
}
.file-upload-wrapper .form-label {
     margin-bottom: 0;
     font-weight: 500;
     color: #495057;
}
.file-upload-wrapper input[type="file"] {
     display: none;
}
 .file-upload-wrapper .file-status-text {
    font-size: 0.85rem;
    color: #6c757d;
    margin-top: 0.25rem;
    min-height: 1.2em;
}

.column-mapping-grid {
    display: none;
}
.update-stock-form button[type="submit"] {
    display: none;
}


.missing-data-table th, .missing-data-table td { font-size: 0.9rem; vertical-align: middle; }

.card-description {
    font-size: 0.9rem;
    color: #6c757d;
    margin-bottom: 1rem;
    line-height: 1.5;
}
.card-description strong {
    font-weight: 600;
    color: #212529;
    display: block;
    margin-bottom: 0.1rem;
}
.card-description span {
    font-weight: 400;
    display: block;
}
.card-description.text-danger strong,
.card-description.text-danger span {
    color: #dc3545;
}

/* --- order.html --- */
.order-list-item-stacked {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid rgba(0, 0, 0, 0.125);
}
.order-info-area {
    cursor: pointer;
}
.order-info-area:hover {
    background-color: #f8f9fa;
}

.order-list-item-stacked .main-info {
    font-size: 1.1rem;
    font-weight: 500;
    color: #212529;
}
.order-list-item-stacked .sub-info {
    font-size: 0.9rem;
    color: #6c757d;
    margin-left: 0.5rem;
}

.order-details-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr); 
    gap: 0.75rem;
    font-size: 0.9rem;
}
.order-details-grid-2col {
    grid-template-columns: repeat(2, 1fr); 
}

.order-details-grid > div {
    line-height: 1.4;
    word-break: break-all; 
}
.order-details-grid > div .sub-info {
    font-size: 0.85rem;
    margin-left: 0;
}
.order-date-badge {
    font-size: 0.85rem;
    font-weight: normal;
}

@media (max-width: 576px) {
    .order-details-grid-2col {
        grid-template-columns: repeat(2, 1fr); 
    }
    .order-details-grid {
        grid-template-columns: 1fr; 
    }
    
    .order-list-item-stacked .main-info {
        font-size: 1.0rem;
    }
    .order-list-item-stacked .sub-info {
        display: block; 
        margin-left: 0;
    }
}

/* --- Order Status Grid --- */
.order-status-grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr); 
    gap: 4px; 
    border-top: 1px dashed #dee2e6;
    padding-top: 0.75rem;
}
.status-btn {
    border: 1px solid #dee2e6;
    background-color: #f8f9fa;
    color: #6c757d;
    font-size: 0.8rem;
    padding: 0.3rem 0.2rem;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.status-btn:hover {
    background-color: #e9ecef;
}
.status-btn.active {
    color: #fff;
    border-color: transparent;
    font-weight: bold;
}
.status-btn.status-1.active { background-color: var(--bs-danger); } 
.status-btn.status-2.active { background-color: var(--bs-warning); color: #333; } 
.status-btn.status-3.active { background-color: var(--bs-info); color: #333; } 
.status-btn.status-4.active { background-color: var(--bs-primary); } 
.status-btn.status-5.active { background-color: var(--bs-success); } 
.status-btn.status-6.active { background-color: var(--bs-secondary); } 


/* --- order_detail.html Modes --- */
body[data-page-mode="view"] .editable-on-demand:disabled,
body[data-page-mode="view"] .editable-on-demand[readonly] {
    background-color: transparent;
    border-color: transparent;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    padding-left: 0; 
    padding-right: 0;
    color: var(--bs-body-color); 
    opacity: 1; 
}

body[data-page-mode="view"] .editable-on-demand.form-control {
    border: none;
    box-shadow: none;
}

body[data-page-mode="view"] .editable-on-demand.form-select {
    background-image: none; 
}

body[data-page-mode="view"] .input-group .btn.editable-on-demand {
    display: none; 
}

body[data-page-mode="view"] .input-group .form-control.editable-on-demand {
    border-radius: var(--bs-border-radius) !important; 
}

body[data-page-mode="view"] .btn-delete-row.editable-on-demand {
    display: none; 
}

body[data-page-mode="view"] #btn-submit-order {
    display: none; 
}
body[data-page-mode="view"] #btn-enable-edit {
    display: inline-block; 
}

body[data-page-mode="edit"] #btn-submit-order {
    display: inline-block; 
}
body[data-page-mode="edit"] #btn-enable-edit {
    display: none; 
}

/* --- Navigation Grid --- */
.nav-grid-container {
    display: grid;
    grid-template-columns: repeat(4, 1fr); 
    gap: 5px;
    border: 1px solid #dee2e6;
    border-radius: 0.375rem;
    padding: 5px;
    background-color: #f8f9fa;
}

/* 화면이 넓으면 한 줄로 8개 배치 */
@media (min-width: 992px) {
    .nav-grid-container {
        grid-template-columns: repeat(8, 1fr);
    }
}

/* 네비게이션 버튼 스타일 (기준) */
.nav-grid-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 0.5rem 0.25rem;
    font-size: 0.85rem;
    color: #6c757d;
    background-color: #fff;
    border: 1px solid #dee2e6;
    border-radius: 0.25rem;
    text-decoration: none;
    height: 60px; /* 높이 고정 */
    text-align: center;
    line-height: 1.3;
}

.nav-grid-item i {
    font-size: 1.4rem; 
    margin-bottom: 2px;
}

.nav-grid-item.nav-grid-sales {
    grid-row: auto;
    grid-column: auto;
}

.nav-grid-item.nav-grid-home {
    grid-row: auto;
    grid-column: auto;
    height: 60px; 
    font-size: 0.85rem;
}
.nav-grid-item.nav-grid-home i {
     font-size: 1.4rem;
}

.nav-grid-item:hover {
    background-color: #e9ecef;
    color: #495057;
}

.nav-grid-item.active {
    background-color: #eb6864;
    border-color: #eb6864;
    color: white;
    font-weight: bold;
}

.nav-grid-item.disabled {
    background-color: #e9ecef;
    color: #adb5bd;
    cursor: not-allowed;
}

/* (수정) 기존 nav-tabs 숨기기 */
.nav.nav-tabs {
    display: none;
}


/* --- Main Header Layout --- */
.main-header {
    margin-bottom: 1rem !important;
    padding: 0 0.5rem;
    position: relative;
}

.header-left, .header-right {
    flex: 1;
    min-width: 0; 
}

.header-center {
    flex: 0 0 auto;
}

.header-right span, .header-right a {
    white-space: nowrap;
}

/* 헤더 버튼용 공통 스타일 - 네비게이션 버튼과 동일하게 맞춤 */
.header-btn-uniform {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 0.5rem 0.25rem;
    font-size: 0.85rem;
    color: #6c757d;
    background-color: #fff;
    border: 1px solid #dee2e6;
    border-radius: 0.25rem;
    text-decoration: none;
    height: 60px;
    width: 100%;
    max-width: 80px; /* 너무 넓어지지 않게 제한 */
    min-width: 60px;
    text-align: center;
    line-height: 1.3;
}
.header-btn-uniform:hover {
    background-color: #e9ecef;
    color: #495057;
}
.header-btn-uniform i {
    font-size: 1.4rem;
    margin-bottom: 2px;
}


/* --- Announcements --- */
.announcement-list-item:hover {
    background-color: #f8f9fa;
}
.announcement-content-preview {
    font-size: 0.9rem;
    color: #495057;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* --- Settings --- */
.section-title-sub {
    font-size: 1.1rem;
    font-weight: 500;
    color: #495057;
    margin-top: 0.5rem;
    margin-bottom: 0.75rem;
}

#all-stores-table th, 
#all-stores-table td {
    font-size: 0.9rem;
    vertical-align: middle;
}

/* --- (3) Search & Detail Page Styles (New) --- */
/* PC 화면에서 카드 높이를 화면에 맞게 고정하고 내부 스크롤 적용 */
@media (min-width: 992px) {
    .full-height-card {
        height: calc(100vh - 140px); /* 헤더, 네비게이션, 여백 고려 */
        overflow: hidden;
        display: flex;
        flex-direction: column;
    }
    .full-height-card .card-body {
        flex: 1;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        padding: 0; /* 내부 패딩 제거하여 리스트/iframe 꽉 채움 */
    }
    .full-height-card .product-list-scrollable {
        flex: 1;
        overflow-y: auto;
    }
    /* Iframe Container */
    .detail-iframe-container {
        flex: 1;
        width: 100%;
        height: 100%;
        border: none;
    }
}